<!DOCTYPE html>

<html>
<head>
<meta charset="UTF-8" />
<script src="Tone.js"></script>
<script src="AVL.js"></script>
<script src="../build/rhombus.js"></script>
<script>
var rhomb1 = new Rhombus();
var rhomb2 = new Rhombus();

var r1 = rhomb1._song.addPattern();
var r2 = rhomb2._song.addPattern();
rhomb1.Edit.insertNote(new rhomb1.Note(69, 600, 48000), r1)
rhomb2.Edit.insertNote(new rhomb2.Note(70, 500, 49000), r2);
</script>
</head>
<body>

<p id="timeDisplay1"></p>
<p id="timeDisplay2"></p>
<button onclick="rhomb1.startPlayback()">Start 1</button>
<button onclick="rhomb1.stopPlayback()">Stop 1</button>
<button onclick="rhomb2.startPlayback()">Start 2</button>
<button onclick="rhomb2.stopPlayback()">Stop 2</button>

<script>
var timeDisplay1 = document.getElementById("timeDisplay1");
var timeDisplay2 = document.getElementById("timeDisplay2");
function updateTime() {
  function one(r, t, n) {
    var seconds = r.getPosition();
    var ticks = r.seconds2Ticks(seconds);
    t.innerHTML = "Current time (" + n + "): (" + ticks.toFixed(0) + " ticks, " + seconds.toFixed(3) + " seconds)";
  }

  one(rhomb1, timeDisplay1, "1");
  one(rhomb2, timeDisplay2, "2");

  requestAnimationFrame(updateTime);
}

updateTime();
</script>

</body>
</html>
